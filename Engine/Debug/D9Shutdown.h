///////////////////////////////////////////////////////////////////////////////////////////////////
// D9Shutdown.h
// This module keeps shutdown functions
// Interface:
// D9_ShutdownAdd, D9_Shutdown
///////////////////////////////////////////////////////////////////////////////////////////////////
#ifndef __D9SHUTDOWN_H__
#define __D9SHUTDOWN_H__

#include "E9System.h"

#define	D9_SHUTDOWN_FNMAX		128

typedef void (*d9ShutdownFn)();

class d9Shutdown
{
public:
static	void			Add( d9ShutdownFn fn );			// add a new shutdown function
static	void			Shutdown();						// call shutdown function in reversed order

static	int				m_fncount;						// number of shutdown functions
static	d9ShutdownFn	m_fn[D9_SHUTDOWN_FNMAX];		// shutdown functions
};

///////////////////////////////////////////////////////////////////////////////////////////////////
// INTERFACE
///////////////////////////////////////////////////////////////////////////////////////////////////
inline	void	D9_ShutdownAdd( d9ShutdownFn fn )		{ d9Shutdown::Add(fn); }
inline	void	D9_Shutdown()							{ d9Shutdown::Shutdown(); }

#endif
///////////////////////////////////////////////////////////////////////////////////////////////////